機能要件の優先順位

## P1: 最優先（必須機能 - MVPで必ず実装）
これらの機能は、MVPの核となる価値を提供するために不可欠です。
 * FR-MVP-1.1 販売実績データ連携:
   * 過去の販売実績データ（指定製品、週次/月次）をCSV/Excelファイルで手動でインポートできること。
   * 取り込みデータの基本的な整合性チェック（欠損値など）を行うこと。
 * FR-MVP-1.2 気象データ自動連携:
   * 予測対象地域（例：鈴鹿市）の気温、降水量データを自動で取得・連携できること。
 * FR-MVP-2.1 初期予測生成:
   * インポートされた販売実績データに基づき、シンプルな時系列モデル（例：指数平滑法、ARIMAの簡易版）を用いて初期の需要予測値を自動で生成できること。
 * FR-MVP-2.2 予測可視化:
   * 初期予測値と過去の販売実績を折れ線グラフで表示できること。
   * 登録された社内ニュース・イベント情報や、自動連携された気象データを、グラフ上の特定の期間と紐づけて表示できること。
 * FR-MVP-3.1 異常値・変動要因の検知と対話開始:
   * 過去の販売実績データにおいて、通常のパターンから大きく乖離する**「異常値」や「急激な変動」**を自動で検出し、システム上でハイライト表示できること。
   * ハイライトされた変動に対し、AIが自動連携した気象データ（気温、降水量）との相関を分析し、可能性のある仮説を提示しながら、担当者に対話形式で質問を投げかけること。
   * 質問時に、具体的な期間提示と、多様な要因例（テレビCM、競合の値引き、イベントなど）を提示できること。
 * FR-MVP-3.2 対話による深掘り:
   * 担当者の回答を受け、AIがその内容を要約し、確認することで、認識のすり合わせと言語化を支援すること。
   * 担当者の回答が抽象的な場合、AIがYes/No形式や具体的な選択肢を交えながら、段階的に深掘りする質問を投げかけられること。
 * FR-MVP-3.3 対話履歴の保存:
   * AIと担当者とのすべての対話履歴を保存し、後から参照できること。
 * FR-MVP-4.1 予測値の手動調整と理由付与:
   * AIが提示した初期予測値に対し、担当者が手動で調整（上書き）できること。
   * 調整を行った際に、簡潔な理由（自由記述または選択肢）を入力できること。
 * FR-MVP-4.2 実績との比較とフィードバック:
   * 期間が終了し、実際の販売実績データが確定した後、システムが予測値と実績を自動で比較し、その乖離を表示できること。
   * この乖離と、過去の対話内容、手動調整の理由を紐づけて担当者が確認できるUIを提供すること。
 * NFR-MVP-2.1 ユーザビリティ:
   * 直感的で分かりやすいWebブラウザベースのUIであること。対話部分はチャット形式が望ましい。
## P2: 重要（次期検討 - MVP後の早期追加）
これらの機能は、MVPの成功を確認後、システムの価値をさらに高めるために優先的に検討すべき機能です。MVPフェーズで利用した技術スタックの範囲内で実装が比較的容易なものを含みます。
 * FR-MVP-1.3 社内ニュース・イベント情報登録 (簡易版):
   * 需要に影響を与えた過去の主要な社内ニュースやイベント情報を、ユーザーが手動で日付と自由記述で登録できること。（MVPでは簡易版をP1に含んでいましたが、より詳細な登録機能や管理機能はP2に位置付けます）
 * NFR-MVP-1.1 パフォーマンス: 限られた対象SKUとデータ量であれば、初期予測生成・対話応答は実用的な速度であること。（MVPでは最低限ですが、より詳細な数値目標設定と達成はP2で強化）
 * NFR-MVP-3.1 データセキュリティ: 基本的なユーザー認証とデータ保護を行うこと。（MVPでも実施しますが、より堅牢なセキュリティ対策や権限管理はP2以降）
 * NFR-MVP-4.1 マシンリソース: クラウド上の小規模なインスタンスで稼働できること。（MVPでの実績を確認後、具体的な最適化をP2で実施）
## P3: あれば良い（将来的な機能拡張 - MVP成功後に検討）
これらの機能は、システムの成熟度が高まり、ユーザーからのさらなる要望が出た場合に検討する、長期的な機能拡張の候補です。
 * FR-1.3 ユーザー手動入力可能な外部データ（詳細版）: 為替レート、原材料価格、競合他社の動向など、より多様な手動入力データの管理。
 * FR-1.2 外部データ自動連携（景気関連データ）： 気象データ以外の、より広範な景気関連データの自動連携（MVPでは簡易的に考慮）。
 * FR-3.2 シナリオベースの仮説検証（詳細版）： より複雑なシナリオ設定と、影響度の多段階評価。
 * FR-3.3 因果関係の逆引き質問（詳細版）： 複数要因の複雑な因果関係を掘り下げる高度な対話。
 * FR-4.2 フィードバックループと継続的学習（AI自動学習強化）： AIが自動的にモデルのパラメータを最適化し、予測ロジックを改善する機能の強化。
 * NFR-X.X 各非機能要件の詳細化と強化: パフォーマンス、スケーラビリティ、可用性、セキュリティ、拡張性など、大規模運用を見据えた要件の本格的な実現。
この優先順位付けは、開発チームがMVP開発に集中し、最も重要な価値を早期にユーザーに届けるための指針となります。
