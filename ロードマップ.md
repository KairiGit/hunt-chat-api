需要予測システム高度化に向けた開発ロードマップ

  1. はじめに
  このドキュメントは、理想的な需要予測ワークフローを実現するため、現在実装済みのRAG（Retrieval-Augmented 
  Generation）コアエンジンを基盤として、段階的に機能を追加・拡張していくための具体的な開発計画を定義します。

  2. 現在の到達点：RAGコアエンジンの完成
  現状、私たちはシステムの「記憶」と「思考」を担う、最も重要なコアエンジンを構築しました。

   * 記憶: AIはチャットでの対話内容をVector DB (Qdrant) に保存できます。
   * 想起: AIは新しい質問に対し、過去の類似した記憶をVector DBから検索できます。
   * 文脈理解: AIは検索した記憶を元に、文脈を理解した回答を生成できます。

  今後は、このコアエンジンに様々な「知識」を与え、その思考結果を具体的な「予測」として出力させ、さらにそのプロセスを「自動化」
  していくフェーズに入ります。

  3. 開発フェーズと具体的なステップ

  開発を以下の4つのフェーズに分け、段階的に進めることを提案します。

  ---

  Phase 1: 基盤データの整備と活用
  目標: システムの「知識」の元となる製品・地域等のマスターデータと、販売実績データを構造化して管理・活用できるようにする。


  ┌─────────┬──────────────────────────────────────────────────────────┬──────────────────────────────────────────────────┐
  │ タスク  │ バックエンド (Go)                                        │ フロントエンド (Next.js)                         │
  ├─────────┼──────────────────────────────────────────────────────────┼──────────────────────────────────────────────────┤
  │ DB導入  │ ① PostgreSQL等のリレーショナルDBを導入し、接続設定を...  │ -                                                │
  │ **マス... │ ② 製品・地域・顧客層などのマスターデータを管理するた...  │ ③ 「データ管理」ページを新設。<br>④ 製品・地...  │
  │ **販売... │ ⑤ ファイルアップロード時に、データを正規化してPostgre... │ ⑥ アップロードUIを改善し、データプレビューや...  │
  │ **実績... │ ⑦ DBに保存された販売実績の要約や特徴的なデータを、`Ve... │ -                                                │
  └─────────┴──────────────────────────────────────────────────────────┴──────────────────────────────────────────────────┘


  このフェーズで達成されること:
   * AIが「製品Aは飲料カテゴリである」といった基本的な情報を理解できるようになります。
   * 販売実績が構造化され、AIがより高度な分析を行うための準備が整います。

  ---

  Phase 2: 外部連携とAIによる自発的分析
  目標: 外部のコンテキスト（天気、景気）を取り込み、AIが能動的に異常を検知して人間に問いかける機能を実現する。


  ┌────────┬─────────────────────────────────────────────────────────┬─────────────────────────────────────────────────────┐
  │ タスク │ バックエンド (Go)                                       │ フロントエンド (Next.js)                            │
  ├────────┼─────────────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
  │ **外...  │ ① 気象データAPI、景気指標APIと連携し、データを定期的... │ ② 「設定」ページに、外部連携APIのキーなどを入力...  │
  │ **異...  │ ③ 販売実績データから、統計的な異常値（例：3σ以上の外... │ -                                                   │
  │ **AI...  │ ④ 異常が検知された際に、関連する外部データ（天気など... │ ⑤ 「ダッシュボード」に「AIからの質問」パネルを実... │
  │ **対...  │ -                                                       │ ⑥ 質問カードに対し、ユーザーがテキストで回答した... │
  └────────┴─────────────────────────────────────────────────────────┴─────────────────────────────────────────────────────┘


  このフェーズで達成されること:
   * システムが半自律的に動き始め、単に質問に答えるだけでなく、ユーザーに有益な「気づき」を提供できるようになります。

  ---

  Phase 3: 予測モデルの実現と評価
  目標: これまで蓄積・分析したすべての情報を統合し、具体的な需要予測「数値」を出力し、その結果を評価できるようにする。


  ┌──────┬─────────────────────────────────────────────────────────────────────┬──────────────────────────────────────────┐
  │ ...  │ バックエンド (Go)                                                   │ フロントエンド (Next.js)                 │
  ├──────┼─────────────────────────────────────────────────────────────────────┼──────────────────────────────────────────┤
  │ **...  │ ① PredictDemand APIを本格的に実装。RAGで取得した全コンテキスト（... │ -                                        │
  │ **...  │ ② 予測結果（予測値、信頼区間、根拠）を返すAPIを整備する。           │ ③ 「予測分析」ページを新設。<br>④ **イ...  │
  │ **...  │ ⑤ 予測値と実績値を比較し、乖離率（MAPEなど）を計算するAPIを実装...  │ ⑥ グラフ上で予測と実績の乖離をハイラ...  │
  └──────┴─────────────────────────────────────────────────────────────────────┴──────────────────────────────────────────┘


  このフェーズで達成されること:
   * システムが本来の目的である「需要予測」を行えるようになり、その精度を人間が評価・確認できるようになります。

  ---

  Phase 4: 自動化と継続的学習
  目標: 人間の介在を最小限にしつつ、システムが自律的に学習・成長していく、理想のワークフローを完成させる。


  ┌──────┬──────────────────────────────────────────────────────────┬─────────────────────────────────────────────────────┐
  │ ...  │ バックエンド (Go)                                        │ フロントエンド (Next.js)                            │
  ├──────┼──────────────────────────────────────────────────────────┼─────────────────────────────────────────────────────┤
  │ **...  │ ① 新規受注（実績）データを、API連携や定時バッチ処理で... │ -                                                   │
  │ **...  │ ② 「実績取込→予測と比較→乖離分析→AIによる質問生成」と... │ ③ 「設定」ページに、分析ジョブの実行頻度（週次、... │
  │ **...  │ ③ （将来的展望）予測と実績の乖離分析の結果や、評価の...  │ ⑤ AIの学習状況（「夏のキャンペーン効果は売上を15... │
  └──────┴──────────────────────────────────────────────────────────┴─────────────────────────────────────────────────────┘


  このフェーズで達成されること:
   * 需要予測PDCAサイクルがシステム内で自律的に回り始め、人間は最終確認と、AIでは判断できない高度な意思決定に集中できるようになり
     ます。